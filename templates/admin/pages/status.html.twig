{% extends 'admin/index.html.twig' %}

{% block title %} {{ parent() }} - Gestion des Statuts {% endblock %}

{% block content %}

    {% if app.request.get("_route") == "create_status" or app.request.get("_route") == "update_status" %}
      {% if form is defined %}
      {{ form_start(form) }} 
        <div class="d-flex flex-column align-items-center justify-content-center m-3 h-50">
          <div class="form-control text-center m-1 w-25">
            {{ form_label(form.status) }}
            {{ form_widget(form.status, { 'attr': {'class': 'text-center'}}) }}        
            <div class="form-error">
                {{ form_errors(form.status) }}
            </div>
          </div>          

          {% if app.request.get("_route") == "create_status" %}  

            <div class="d-flex align-items-center justify-content-around ">
              <div class="text-center m-4 ">
                <a href="/admin/select_status">
                  <input type="button" value="Liste des statuts" class="btn btn-primary mt-2 w-auto" >
                </a>            
              </div>  
              <div class="text-center m-4 ">
                <input type="submit" value="Enregistrer" class="btn btn-success mt-2 w-auto">
              </div>
            </div>

          {% else %}

            <div class="text-center m-4 ">
              <input type="submit" value="Enregistrer la modification" class="btn btn-warning mt-2 w-auto">
            </div>
            
          {% endif %}

        </div>

      {{ form_end(form) }}
      {% endif %}
    {% else %}
      
      {% if status is empty %}
        
        <h5 class="text-center m-4">Aucun statut trouv√©, veuillez en ajouter au moins un SVP.</h5>
        <div class="text-center m-4 ">
        <a href="/admin/status">
          <input type="button" value="Ajouter un statut" class="btn btn-primary mt-2 w-auto" >
        </a>            
        </div>

      {% else %}

        <div class=" d-flex flex-wrap justify-content-center align-items-center">
        
  
          {% for state in status %}
    
            <div class="card" style="width: 18rem;">
              <div class="card-body text-center">
                <h5 class="card-title">Statut : {{ state.status }}</h5>
                <a href="/admin/update_status/{{state.id}}" >
                  <input type="button" value="Modifier" class="btn btn-warning m-3 w-auto" >
                </a>
                <a href="/admin/delete_status/{{state.id}}"  >
                  <input type="button" value="Supprimer" class="btn btn-danger m-3 w-auto" >
                </a>
              </div>
            </div>        
            
          {% endfor %}  
          <a href="/admin/status">
            <input type="button" value="Ajouter un statut" class="btn btn-primary mt-2 w-auto" >
          </a> 
        </div>   
        
      {% endif %}      
    
    {% endif %}
  

{% endblock %}







